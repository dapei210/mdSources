### 概述
端点检测与防护（Endpoint Detection and Response，EDR）是一种基于采集、记录并存储数字环境中各端点行为数据与状态数据，并对数据进行关联分析，以应对威胁的安全能力：通过对端点数据的分析，检测出环境存在的威胁，并能进行隔离、查杀等响应手段；同时，对已发生，以及正在发生的安全事件，实现追踪溯源；针对潜在的风险（如二次攻击、有漏洞系统等），基于客户的需求，提供一定的修复与保护建议。最终，实现包括主机在内的整个数字环境中，对未知威胁与高级可持续威胁的检测与响应。


EDR解决方案需要有以下四个关键能力：检测安全事件、遏制威胁、调查安全事件、提供修复指导

### 核心价值
1. 未知威胁与高级可持续威胁检测

如今的数字环境攻防状况，最大的威胁是未知威胁，以及潜在的APT攻击。然而，传统的端点杀毒软件由于依赖规则库，无法应对这些基于未知漏洞，以及基于人员的威胁。EDR基于各个端点数据的关联分析能力，不仅能够通过IOA，还能够通过IOC，发现遭到攻击的设备，将受害情况尽可能在早期限制在可控制范围内。

2. 威胁响应

在对威胁的检测之上，EDR还需要能对发现的威胁采取一定的措施。除了传统的杀毒软件中会进行的查杀行为之外，EDR更需要能尽可能将威胁控制在受攻击端点的隔离能力。因此，微隔离技术能够和EDR结合，更好地实现威胁控制。

3. 溯源取证
   
对于现代的数字攻防，需要的不仅仅是能够防住攻击，更需要的是知道那些已经对自身环境实现了数个攻击步骤成功的原因。因此，就需要能对检测到的攻击进行溯源。基于端点的数据信息，通过对攻击的追踪溯源，发现自身端点设备中存在的安全隐患，从而采取后续的安全手段，降低之后攻击的成功率


### EDR关键能力
1. 防病毒引擎

尽管说EDR不依赖于规则库对已知病毒进行查杀，但是EDR依然需要结合IOC（攻陷信标）和IOA（攻击信标）对现有状态进行分析，以实现对各类病毒的检测效果。

尤其在某些离线场景下，无法通过云端分析的能力实时判断环境中是否出现新的威胁，就需要依赖EDR本身的防病毒引擎能力进行病毒的检测与响应。

2. 数据采集与分析能力

无论是EDR要实现的对未知威胁的检测要求，或者是对安全事故的溯源要求，其核心都是EDR本身的数据能力：数据采集与数据分析。

没有足够完整的数据，就无法进行有效的分析。因此，EDR必然需要强大的数据采集能力，能采集到端点上的各类关键数据。不同厂商会对采集数据有不同的分类方式，在采集数据的种类上也会有一定区别。企业在选购产品时，需要了解EDR厂商具体收集的端点数据类型是否和自己环境匹配。

另一方面，数据采集的价值在于分析。EDR能力能否有效地关联各个端点采集到的数据，并且分析后检测出威胁非常重要。在数据采集过程中，即使数据采集得足够多，在分析阶段一旦无法被合理使用，也是没有价值的。因此，企业同样需要进一步了解EDR厂商采集的数据以及其关联分析方式中的一些逻辑。

最后，在数据采集和数据分析之外，还有一项值得关注的数据能力：数据输出。“大统一”的安全解决方案是最理想的状态，但现实情况是大部分情况都需要多个不同安全厂商的安全产品共存。一旦这些产品无法协同，那就无法把握整个数字环境，更遑论XDR、态势感知。然而，在多厂商产品结合的过程中，数据标准不统一，或者本身输出的数据缺乏价值性都会成为痛点。

企业在选择EDR厂商的时候，对于单点能力突出的厂商，还需要考虑其数据输出能力。这需要EDR产品能够和多个不同安全厂商进行数据对接，同时输出的数据也应该尽可能是更为有效、有价值、经过处理的数据，而不是将大量的原始数据直接进行输出。

3. 响应策略

既然是端点检测与响应能力，除了检测，自然需要响应能力。EDR能力需要提供一系列响应能力，包括查杀、隔离、告警。从当前的情况来看，隔离能力最为重要。因为对于企业而言，最需要保护资产的是主机；因此，防止威胁在网络中扩散到主机最为关键。当安全事故发生的时候，需要将威胁因素限制在相关端点之中，避免其扩散到其他端点，甚至主机，将危害限制到最低。另一方面，将威胁限制在少数有限的端点上，也更利于企业在事后进行追踪溯源。

在理想状态下，我们会期望响应行为能够自动化进行。但是在实际环境中，会遇到各种问题，包括异常行为难以判定是否属于攻击行为、某些响应行为是否会影响业务等情况。因此，现在的响应机制依然需要靠自动化与人工协同，通过安全策略设置，将大部分安全事件自动化处理，将一些难以区分或者处理的事件交由安全专家手动处理。但是，安全策略的设置对EDR能力的分析能力与策略配置能力也提出了一定的要求。

4. 威胁情报

对于安全事故的溯源取证，不仅依赖于数据采集的颗粒度，以及对于端点数据的分析能力，同样需要威胁情报的协同。尤其是在大型演练场景中，参加演练的企业不仅需要能够检测到攻击事件，更需要通过发现攻击来源获取加分。这个时候，就不仅仅需要从内部进行溯源取证，还需要对外部的网络环境有溯源能力，就需要依赖威胁情报的协助。

在事前防护阶段，威胁情报还能根据当下的威胁态势与信息，结合自身环境进行分析与检测，从而降低误报率，并为安全运维人员提供有价值的分析信息，对环境内的设备进行针对性的防护

5. 安全服务

我国安全人才缺口依然比较大，企业本身缺乏安全运维人才。从投资回报的角度来看，对于大部分企业，通过从安全厂商处以安全服务的方式进行安全运维依然是一个更有利的方式。因此，对大部分安全能力而言，“产品+服务”的模式会逐渐成为主流——EDR也不例外。

从EDR角度来看，安全服务除了需要日常的防护之外，更重要的是让安全专家使用EDR能力进行溯源。优秀的安全专家团队能够基于EDR的数据，对安全事故进行梳理，还原攻击路线。

但是，值得注意的是，安全专家的溯源能力和EDR的数据输出能力是相辅相成的。如果EDR本身能够梳理各类数据，并且形成易于分析、阅读的数据内容，也能大大提升安全专家的溯源和分析效率。


### EDR与传统防病毒区别
1. 安全理念不同

传统防病毒专注于预防，但对攻击期间发生的情况一无所知。 它们被设计用来在坏的东西进入你的网络之前捕捉它们。 但是即使它们正确地做到了这一点，它们也不能告诉你恶意软件来自哪里，以及它们是如何在系统中传播的。

EDR不在仅仅是预防，更多的是强调“检测”与“响应”，能及时发现异常并进行处置，将损害限制在可控范围内。EDR 描述的是整个攻击过程，并且不再只是着眼于单个终端的防御，而是能够对各个终端上事件的关联分析，还原整个攻击的流程，描绘出攻击事件的全貌。

2. 技术路线不同

传统防病毒是基于特征库进行攻击比对，防御效果依赖于特征库，主要对已知威胁进行检测和防护。

EDR是通过对操作系统行为记录和存储，根据行为规则IOA和外部特征库IOC来对漏洞攻击和无文件攻击等高级威胁进行关联分级及检测，对威胁的疑似主机进行遏制和修复，能对已知和未知威胁进行检测和防护。